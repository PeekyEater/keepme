<%- include('../includes/head.ejs') %>
</head>

<body>
    <%- include('../includes/navigation.ejs') %>

    <main class="main">
        <a class="add-button btn" href="/add-note">
            <svg class="add-button-icon" height="448pt" viewBox="0 0 448 448" width="448pt"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0" />
            </svg>
            <span class="add-button-label">Add new note</span>
        </a>
        <% if (notes.length > 0) { %>
        <div class="notes-container">
            <% for (let note of notes) { %>
            <article class="note--item" <% if (note.dataValues.color) { %>
                style="background-color:<%= note.dataValues.color.dataValues.hash %>;" <% } %>>
                <div class="note--main">
                    <div class="note--body">
                        <% if (note.title) { %>
                        <h2 class="note__title">
                            <%= note.title %>
                        </h2>
                        <% } %>
                        <p class="note__description">
                            <%= note.text %>
                        </p>
                    </div>
                    <div class="note--footer">
                        <% if (note.dataValues.tags.length > 0) { %>
                        <% for (let tag of note.dataValues.tags) { %>
                        <a href="/tags/<%= tag.dataValues.id %>" class="tag-small">#<%= tag.name %></a>
                        <% } %>
                        <% } %>
                    </div>
                </div>
                <div class="actions">
                    <form action="/archive-note" method="POST" class="action-form flex">
                        <input name="noteId" value="<%= note.dataValues.id %>" type="hidden">
                        <button class="action-button" type="submit">
                            <img src="/img/archive.svg" alt="Archive" class="action-img">
                        </button>
                    </form>
                    <form action="/pin-note" method="POST" class="action-form">
                        <input name="noteId" value="<%= note.dataValues.id %>" type="hidden">
                        <button class="action-button flex" type="submit">
                            <img src="/img/pin.svg" alt="Pin" class="action-img">
                        </button>
                    </form>
                    <form action="/edit-note/<%= note.dataValues.id %>" method="GET" class="action-form">
                        <button class="action-button flex" type="submit">
                            <img src="/img/edit.svg" alt="Edit" class="action-img">
                        </button>
                    </form>
                    <form action="/add-reminder/<%= note.dataValues.id %>" method="GET" class="action-form">
                        <button class="action-button flex" type="submit">
                            <img src="/img/reminder.svg" alt="Remind" class="action-img">
                        </button>
                    </form>
                </div>
            </article>
            <% } %>
        </div>
        <% } else { %>
        <h1 class="title">No notes Found!</h1>
        <% } %>
        <div class="mobile-offset"></div>
    </main>
    <%- include('../includes/end.ejs') %>